{% extends 'base.html' %}

{% block title %}Contas a Pagar - Overseer{% endblock %}

{% block page_title %}
    Contas a Pagar
{% endblock %}


{% block content %}
<section class="page-grid-single-column"> 
            
    <div class="card filter-bar">
        <div class="filter-bar-inputs">
            <select id="sort-by" class="form-select small">
                <option value="modificacao">Ordenar por Modificação</option>
                <option value="nome">Ordenar por Descrição (A-Z)</option>
                <option value="vencimento">Ordenar por Vencimento</option>
                <option value="valor_desc">Ordenar por Valor (Maior)</option>
                <option value="valor_asc">Ordenar por Valor (Menor)</option>
            </select>

            <select id="status-filter" class="form-select small">
                <option value="todas">Status: Todas</option>
                <option value="a_pagar">Status: A Pagar (Não Vencidas)</option>
                <option value="vencidas">Status: Vencidas</option>
                <option value="pagas">Status: Pagas</option>
                <option value="arquivadas">Status: Arquivadas</option>
            </select>
            
            <select id="empresa-filter" class="form-select small">
                <option value="todas">Empresa: Todas</option>
                </select>
        </div>
        
        <div class="filter-bar-action">
            <button id="add-new-btn" class="button button-primary full-width">
                Cadastrar Conta
            </button>
        </div>
    </div>

    <div id="form-container" class="card hidden">
        <h2 id="form-title" class="card-title">Cadastrar Nova Conta</h2>
        <form id="item-form">
            <input type="hidden" id="item-id">
            
            <div class="form-group full-width" style="margin-bottom: 1rem;">
                <label for="id-empresa" class="form-label">
                    Empresa Vinculada (Incubadora ou Incubada)
                </label>
                <select id="id-empresa" name="id-empresa" class="form-select" required>
                    </select>
            </div>
            
            <div class="form-grid-2-col">
                <div class="form-group full-width-2-col">
                    <label for="item-description" class="form-label">
                        Descrição da Conta (Ex: Conta de Energia)
                    </label>
                    <input type="text" id="item-description" name="description" class="form-input" placeholder="Ex: Conta de internet mensal" required>
                </div>
                <div class="form-group">
                    <label for="vencimento" class="form-label">Data de Vencimento</label>
                    <input type="date" id="vencimento" name="vencimento" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="saldo" class="form-label">Valor da Conta (R$)</label>
                    <input type="number" step="0.01" id="saldo" name="saldo" class="form-input" placeholder="0.00" required>
                </div>
                <div class="form-group">
                    <label for="status" class="form-label">Status da Conta</label>
                    <select id="status" name="status" class="form-select" required>
                        <option value="nao_paga">Não Paga</option>
                        <option value="paga">Paga</option>
                    </select>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="button" id="cancel-btn" class="button button-secondary">Cancelar</button>
                <button type="submit" class="button button-success">Salvar Conta</button>
            </div>
        </form>
    </div>

    <div id="items-list" class="card">
        <h2 class="card-title">Contas</h2>
        <div id="loading" class="loading-indicator">
            <p>Carregando contas...</p>
        </div>
        <ul id="items-ul" class="item-list account-list">
            </ul>
    </div>

</section>
{% endblock %}


{% block scripts %}
    <script src="{{ url_for('static', filename='script/contas1.js') }}" defer></script>
{% endblock %}